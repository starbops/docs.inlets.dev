
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Inlets Secure Tunnels From Dev to Cloud">
      
      
        <meta name="author" content="OpenFaaS Ltd">
      
      
        <link rel="canonical" href="https://docs.inlets.dev/reference/inlets-operator/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.6">
    
    
      
        <title>inlets-operator reference documentation - Inlets</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.9d5733d3.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto,+Helvetica:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto, Helvetica";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-60759269-5","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#inlets-operator-reference-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Inlets" class="md-header__button md-logo" aria-label="Inlets" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Inlets
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              inlets-operator reference documentation
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/inlets" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    inlets/inlets
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Inlets" class="md-nav__button md-logo" aria-label="Inlets" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    Inlets
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/inlets" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    inlets/inlets
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/reference/faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/manual-http-server/" class="md-nav__link">
        Manual HTTP tunnel server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/automated-http-server/" class="md-nav__link">
        Automated HTTP tunnel server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/dual-tunnels/" class="md-nav__link">
        Dual TCP and HTTP tunnels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/caddy-http-tunnel/" class="md-nav__link">
        Custom reverse proxy with Caddy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/kubernetes-ingress/" class="md-nav__link">
        Kubernetes Ingress
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/kubernetes-api-server/" class="md-nav__link">
        Kubernetes API Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/postgresql-tcp-tunnel/" class="md-nav__link">
        Tunnel Postgresql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/ssh-tcp-tunnel/" class="md-nav__link">
        Tunnel SSH
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/community/" class="md-nav__link">
        Community tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/reference/inlets-operator/" class="md-nav__link">
        Inlets Operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/reference/inletsctl/" class="md-nav__link">
        inletsctl
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="inlets-operator-reference-documentation">inlets-operator reference documentation<a class="headerlink" href="#inlets-operator-reference-documentation" title="Permanent link">&para;</a></h1>
<p>The <a href="https://github.com/inlets/inlets-operator">inlets/inlets-operator</a> brings LoadBalancers with public IP addresses to your local Kubernetes clusters.</p>
<blockquote>
<p>It works by creating VMs and running an inlets PRO tunnel server for you, the VM's public IP is then attached to the cluster and an inlets client Pod runs for you.</p>
</blockquote>
<p>You can install the inlets-operator using a single command with <a href="https://get-arkade.dev/">arkade</a> or with helm. arkade is an open-source Kubernetes marketplace and easier to use.</p>
<p>For each provider, the minimum requirements tend to be:</p>
<ul>
<li>An access token - for the operator to create VMs for inlets PRO servers</li>
<li>A region - where to create the VMs</li>
</ul>
<blockquote>
<p>You can <a href="https://inlets.dev/blog/2021/07/27/monthly-subscription.html">subscribe to inlets for personal or commercial use via Gumroad</a></p>
</blockquote>
<h2 id="install-using-arkade">Install using arkade<a class="headerlink" href="#install-using-arkade" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>arkade install inlets-operator <span class="se">\</span>
 --provider <span class="nv">$PROVIDER</span> <span class="se">\ </span><span class="c1"># Name of the cloud provider to provision the exit-node on.</span>
 --region <span class="nv">$REGION</span> <span class="se">\ </span><span class="c1"># Used with cloud providers that require a region.</span>
 --zone <span class="nv">$ZONE</span> <span class="se">\ </span><span class="c1"># Used with cloud providers that require zone (e.g. gce).</span>
 --token-file <span class="nv">$HOME</span>/Downloads/key.json <span class="se">\ </span><span class="c1"># Token file/Service Account Key file with the access to the cloud provider.</span>
 --license-file inlets-pro-license.txt <span class="c1"># inlets-pro license file. (required)</span>
</code></pre></div>
<h2 id="install-using-helm">Install using helm<a class="headerlink" href="#install-using-helm" title="Permanent link">&para;</a></h2>
<p>Checkout the inlets-operator helm chart <a href="https://github.com/inlets/inlets-operator/blob/master/chart/inlets-operator/README.md">README</a> to know more about the values that can be passed to <code>--set</code> and to see provider specific example commands.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create the Custom Resource Definition for a &quot;Tunnel&quot;</span>
kubectl apply -f <span class="se">\</span>
  https://raw.githubusercontent.com/inlets/inlets-operator/master/artifacts/crds/inlets.inlets.dev_tunnels.yaml

<span class="c1"># Create a secret to store the service account key file</span>
kubectl create secret generic inlets-access-key <span class="se">\</span>
  --from-file<span class="o">=</span>inlets-access-key<span class="o">=</span>key.json

<span class="c1"># Add and update the inlets-operator helm repo</span>
helm repo add inlets https://inlets.github.io/inlets-operator/

<span class="c1"># Update the local repository</span>
helm repo update

<span class="c1"># Install inlets-operator with the required fields</span>
helm upgrade inlets-operator --install inlets/inlets-operator <span class="se">\</span>
  --set <span class="nv">provider</span><span class="o">=</span><span class="nv">$PROJECTID</span>,zone<span class="o">=</span><span class="nv">$ZONE</span>,region<span class="o">=</span><span class="nv">$REGION</span> <span class="se">\</span>
  --set <span class="nv">projectID</span><span class="o">=</span><span class="nv">$PROJECTID</span> <span class="se">\</span>
  --set <span class="nv">inletsProLicense</span><span class="o">=</span><span class="nv">$LICENSE</span>
</code></pre></div>
<p>View the code and chart on GitHub: <a href="https://github.com/inlets/inlets-operator">inlets/inlets-operator</a></p>
<h2 id="instructions-per-cloud">Instructions per cloud<a class="headerlink" href="#instructions-per-cloud" title="Permanent link">&para;</a></h2>
<h3 id="create-tunnel-servers-on-digitalocean">Create tunnel servers on DigitalOcean<a class="headerlink" href="#create-tunnel-servers-on-digitalocean" title="Permanent link">&para;</a></h3>
<p>Install with inlets PRO on <a href="https://m.do.co/c/8d4e75e9886f">DigitalOcean</a>.</p>
<p>Assuming you have created an API key and saved it to <code>$HOME/Downloads/do-access-token</code>, run:</p>
<div class="highlight"><pre><span></span><code>arkade install inlets-operator <span class="se">\</span>
 --provider digitalocean <span class="se">\</span>
 --region lon1 <span class="se">\</span>
 --token-file <span class="nv">$HOME</span>/Downloads/do-access-token <span class="se">\</span>
 --license-file <span class="nv">$HOME</span>/.inlets/LICENSE
</code></pre></div>
<h3 id="create-tunnel-servers-on-aws-ec2">Create tunnel servers on AWS EC2<a class="headerlink" href="#create-tunnel-servers-on-aws-ec2" title="Permanent link">&para;</a></h3>
<p>Instructions for <a href="https://aws.amazon.com/ec2/">AWS EC2</a></p>
<p>To use the instructions below you must have the AWS CLI configured with sufficient permissions to create users and roles.</p>
<ul>
<li>Create a AWS IAM Policy with the following:</li>
</ul>
<p>Create a file named <code>policy.json</code> with the following content</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;Version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;Statement&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;Effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;Action&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:AuthorizeSecurityGroupIngress&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:DescribeInstances&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:DescribeImages&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:TerminateInstances&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:CreateSecurityGroup&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:CreateTags&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:DeleteSecurityGroup&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:RunInstances&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ec2:DescribeInstanceStatus&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;Resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Create the policy in AWS</p>
<div class="highlight"><pre><span></span><code>aws iam create-policy --policy-name inlets-automation --policy-document file://policy.json
</code></pre></div>
<ul>
<li>Create an IAM user</li>
</ul>
<div class="highlight"><pre><span></span><code>aws iam create-user --user-name inlets-automation
</code></pre></div>
<ul>
<li>Add the Policy to the IAM user</li>
</ul>
<p>We need to use the policy arn generated above, it should have been printed to the console on success. It also follows the format below.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">AWS_ACCOUNT_NUMBER</span><span class="o">=</span><span class="s2">&quot;Your AWS Account Number&quot;</span>
aws iam attach-user-policy --user-name inlets-automation --policy-arn arn:aws:iam::<span class="si">${</span><span class="nv">AWS_ACCOUNT_NUMBER</span><span class="si">}</span>:policy/inlets-automation
</code></pre></div>
<ul>
<li>Generate an access key for your IAM User</li>
</ul>
<p>The below commands will create a set of credentials and save them into files for use later on.</p>
<blockquote>
<p>we are using <a href="https://stedolan.github.io/jq/">jq</a> here. It can be installed using the link provided.
Alternatively you can print ACCESS_KEY_JSON and create the files manually.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nv">ACCESS_KEY_JSON</span><span class="o">=</span><span class="k">$(</span>aws iam create-access-key --user-name inlets-automation<span class="k">)</span>
<span class="nb">echo</span> <span class="nv">$ACCESS_KEY_JSON</span> <span class="p">|</span> jq -r .AccessKey.AccessKeyId &gt; access-key
<span class="nb">echo</span> <span class="nv">$ACCESS_KEY_JSON</span> <span class="p">|</span> jq -r .AccessKey.SecretAccessKey &gt; secret-access-key
</code></pre></div>
<p>Install with inlets PRO:</p>
<div class="highlight"><pre><span></span><code>arkade install inlets-operator <span class="se">\</span>
 --provider ec2 <span class="se">\</span>
 --region eu-west-1 <span class="se">\</span>
 --token-file <span class="nv">$HOME</span>/Downloads/access-key <span class="se">\</span>
 --secret-key-file <span class="nv">$HOME</span>/Downloads/secret-access-key <span class="se">\</span>
 --license-file <span class="nv">$HOME</span>/.inlets/LICENSE
</code></pre></div>
<h3 id="create-tunnel-servers-on-google-compute-engine-gce">Create tunnel servers on Google Compute Engine (GCE)<a class="headerlink" href="#create-tunnel-servers-on-google-compute-engine-gce" title="Permanent link">&para;</a></h3>
<p>Instructions for <a href="https://cloud.google.com/compute">Google Cloud</a></p>
<p>It is assumed that you have gcloud installed and configured on your machine.
If not, then follow the instructions <a href="https://cloud.google.com/sdk/docs/quickstarts">here</a></p>
<p>To get your service account key file, follow the steps below:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Get current projectID</span>
<span class="nb">export</span> <span class="nv">PROJECTID</span><span class="o">=</span><span class="k">$(</span>gcloud config get-value core/project <span class="m">2</span>&gt;/dev/null<span class="k">)</span>

<span class="c1"># Create a service account</span>
gcloud iam service-accounts create inlets <span class="se">\</span>
  --description <span class="s2">&quot;inlets-operator service account&quot;</span> <span class="se">\</span>
  --display-name <span class="s2">&quot;inlets&quot;</span>

<span class="c1"># Get service account email</span>
<span class="nb">export</span> <span class="nv">SERVICEACCOUNT</span><span class="o">=</span><span class="k">$(</span>gcloud iam service-accounts list <span class="p">|</span> grep inlets <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span>

<span class="c1"># Assign appropriate roles to inlets service account</span>
gcloud projects add-iam-policy-binding <span class="nv">$PROJECTID</span> <span class="se">\</span>
  --member serviceAccount:<span class="nv">$SERVICEACCOUNT</span> <span class="se">\</span>
  --role roles/compute.admin

gcloud projects add-iam-policy-binding <span class="nv">$PROJECTID</span> <span class="se">\</span>
  --member serviceAccount:<span class="nv">$SERVICEACCOUNT</span> <span class="se">\</span>
  --role roles/iam.serviceAccountUser

<span class="c1"># Create inlets service account key file</span>
gcloud iam service-accounts keys create key.json <span class="se">\</span>
  --iam-account <span class="nv">$SERVICEACCOUNT</span>
</code></pre></div>
<p>Install the operator:</p>
<div class="highlight"><pre><span></span><code>arkade install inlets-operator <span class="se">\</span>
    --provider gce <span class="se">\</span>
    --project-id <span class="nv">$PROJECTID</span> <span class="se">\</span>
    --zone us-central1-a <span class="se">\</span>
    --token-file key.json <span class="se">\</span>
    --license-file <span class="nv">$HOME</span>/.inlets/LICENSE
</code></pre></div>
<h3 id="create-tunnel-servers-on-azure">Create tunnel servers on Azure<a class="headerlink" href="#create-tunnel-servers-on-azure" title="Permanent link">&para;</a></h3>
<p>Instructions for <a href="https://azure.com">Azure</a></p>
<p>Prerequisites:</p>
<ul>
<li>You will need <code>az</code>. See <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli">Install the Azure CLI</a></li>
<li>You'll need to have run <code>az login</code> also</li>
</ul>
<p>Generate Azure authentication file:</p>
<div class="highlight"><pre><span></span><code>az ad sp create-for-rbac --sdk-auth<span class="se">\</span>
  &gt; <span class="nv">$HOME</span>/Downloads/client_credentials.json
</code></pre></div>
<p>Find your region code with:</p>
<div class="highlight"><pre><span></span><code>az account list-locations -o table

DisplayName               Name                 RegionalDisplayName
------------------------  -------------------  -------------------------------------
United Kingdom            ukwest               United Kingdom
</code></pre></div>
<p>Install using helm:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">SUBSCRIPTION_ID</span><span class="o">=</span><span class="s2">&quot;YOUR_SUBSCRIPTION_ID&quot;</span>
<span class="nb">export</span> <span class="nv">AZURE_REGION</span><span class="o">=</span><span class="s2">&quot;ukwest&quot;</span>
<span class="nb">export</span> <span class="nv">INLETS_LICENSE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>cat ~/.inlets/LICENSE<span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">export</span> <span class="nv">ACCESS_KEY</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/Downloads/client_credentials.json&quot;</span>

kubectl apply -f <span class="se">\</span>
  https://raw.githubusercontent.com/inlets/inlets-operator/master/artifacts/crds/inlets.inlets.dev_tunnels.yaml

kubectl create secret generic inlets-access-key <span class="se">\</span>
  --from-file<span class="o">=</span>inlets-access-key<span class="o">=</span><span class="nv">$ACCESS_KEY</span>

helm repo add inlets https://inlets.github.io/inlets-operator/
helm repo update

helm upgrade inlets-operator --install inlets/inlets-operator <span class="se">\</span>
  --set <span class="nv">provider</span><span class="o">=</span>azure,region<span class="o">=</span><span class="nv">$AZURE_REGION</span> <span class="se">\</span>
  --set <span class="nv">subscriptionID</span><span class="o">=</span><span class="nv">$SUBSCRIPTION_ID</span> <span class="se">\</span>
  --set <span class="nv">inletsProLicense</span><span class="o">=</span><span class="nv">$INLETS_LICENSE</span>
</code></pre></div>
<h3 id="create-tunnel-servers-on-linode">Create tunnel servers on Linode<a class="headerlink" href="#create-tunnel-servers-on-linode" title="Permanent link">&para;</a></h3>
<p>Instructions for <a href="https://linode.com">Linode</a></p>
<p>Install using helm:</p>
<div class="highlight"><pre><span></span><code>kubectl apply -f ./artifacts/crds/

<span class="c1"># Create a secret to store the service account key file</span>
kubectl create secret generic inlets-access-key --from-literal inlets-access-key<span class="o">=</span>&lt;Linode API Access Key&gt;

<span class="c1"># Add and update the inlets-operator helm repo</span>
helm repo add inlets https://inlets.github.io/inlets-operator/

helm repo update

<span class="c1"># Install inlets-operator with the required fields</span>
helm upgrade inlets-operator --install inlets/inlets-operator <span class="se">\</span>
  --set <span class="nv">provider</span><span class="o">=</span>linode,region<span class="o">=</span>us-east,inletsProLicense<span class="o">=</span><span class="k">$(</span>cat <span class="nv">$HOME</span>/inlets-pro-license.txt<span class="k">)</span>
</code></pre></div>
<p>You can also install the inlets-operator using a single command using <a href="https://get-arkade.dev/">arkade</a>, arkade runs against any Kubernetes cluster.</p>
<p>Install with inlets PRO:</p>
<div class="highlight"><pre><span></span><code>arkade install inlets-operator <span class="se">\</span>
 --provider linode <span class="se">\</span>
 --region us-east <span class="se">\</span>
 --access-key &lt;Linode API Access Key&gt; <span class="se">\</span>
 --license <span class="k">$(</span>cat <span class="nv">$HOME</span>/inlets-pro-license.txt<span class="k">)</span>
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 OpenFaaS Ltd

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.sections", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.5e67fbfe.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.e87a5f81.min.js"></script>
      
    
  </body>
</html>