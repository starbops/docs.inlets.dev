
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Inlets Secure Tunnels From Dev to Cloud">
      
      
        <meta name="author" content="OpenFaaS Ltd">
      
      
        <link rel="canonical" href="https://docs.inlets.dev/tutorial/automated-http-server/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.6">
    
    
      
        <title>Automated http server - Inlets</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.9d5733d3.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto,+Helvetica:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto, Helvetica";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-60759269-5","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#automated-http-tunnel-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Inlets" class="md-header__button md-logo" aria-label="Inlets" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Inlets
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Automated http server
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/inlets" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    inlets/inlets
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Inlets" class="md-nav__button md-logo" aria-label="Inlets" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    Inlets
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/inlets" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    inlets/inlets
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/reference/faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/manual-http-server/" class="md-nav__link">
        Manual HTTP tunnel server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/automated-http-server/" class="md-nav__link">
        Automated HTTP tunnel server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/dual-tunnels/" class="md-nav__link">
        Dual TCP and HTTP tunnels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/caddy-http-tunnel/" class="md-nav__link">
        Custom reverse proxy with Caddy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/kubernetes-ingress/" class="md-nav__link">
        Kubernetes Ingress
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/kubernetes-api-server/" class="md-nav__link">
        Kubernetes API Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/postgresql-tcp-tunnel/" class="md-nav__link">
        Tunnel Postgresql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/ssh-tcp-tunnel/" class="md-nav__link">
        Tunnel SSH
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/tutorial/community/" class="md-nav__link">
        Community tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/reference/inlets-operator/" class="md-nav__link">
        Inlets Operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/reference/inletsctl/" class="md-nav__link">
        inletsctl
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>Automated http server</h1>

<h2 id="automated-http-tunnel-server">Automated HTTP tunnel server<a class="headerlink" href="#automated-http-tunnel-server" title="Permanent link">&para;</a></h2>
<p>Learn how to serve traffic from your private network over a private tunnel server.</p>
<p>At the end of this tutorial, you'll have a a secure TLS public endpoint using your own DNS and domain, which you can use to access your internal services or webpages.</p>
<p>I'll show you how to:</p>
<ul>
<li>automate a tunnel server on a public cloud provider with inlets pre-loaded onto it, </li>
<li>how to connect a client from your home or private network</li>
<li>how to tunnel one or more services</li>
<li>and what else you can do </li>
</ul>
<p>In <a href="https://inlets.dev/blog/2021/07/27/monthly-subscription.html">a previous article</a>, I explained some of the differences between SaaS and private tunnel servers.</p>
<h2 id="create-your-tunnel-server">Create your tunnel server<a class="headerlink" href="#create-your-tunnel-server" title="Permanent link">&para;</a></h2>
<p>With SaaS tunnels, your tunnels server processes run on shared servers with other users. With a private tunnel server like inlets, you need to create a server somewhere on the Internet to run the tunnel. It should be created with a public IP address that you can use to accept traffic and proxy it into your private network.</p>
<p><img src="https://inlets.dev/images/quick.png" alt="Inlets Conceptual architecture" width="60%"></p>
<blockquote>
<p>Pictured: Inlets Conceptual architecture</p>
</blockquote>
<p>The simplest way to do this is to use the <a href="https://github.com/inlets/inletsctl">inletsctl</a> tool, which supports around a dozen clouds. The alternative is to set up a VPS or install inlets-pro onto a server you already have set up, and then add a systemd unit file so that it restarts if the tunnel or server should crash for any reason.</p>
<p>To see a list of supported clouds run:</p>
<div class="highlight"><pre><span></span><code>inletsctl create --help
</code></pre></div>
<p>For instructions on how to create an API key or service account for each, <a href="https://docs.inlets.dev/#/tools/inletsctl?id=inletsctl-reference-documentation">feel free to browse the docs</a>.</p>
<div class="highlight"><pre><span></span><code>inletsctl create <span class="se">\</span>
 --region lon1 <span class="se">\</span>
 --provider digitalocean <span class="se">\</span>
 --access-token-file ~/digital-ocean-api-key.txt <span class="se">\</span>
 --letsencrypt-domain blog.example.com <span class="se">\</span>
 --letsencrypt-email webmaster@example.com
</code></pre></div>
<p>A VM will be created in your account using the cheapest plan available, for DigitalOcean this costs 5 USD / mo at time of writing.</p>
<p>You can also run your tunnel server in the free tier of GCP, Oracle Cloud or on Fly.io at no additional cost.</p>
<p>Once the tunnel server has been created, you will receive:</p>
<ul>
<li>The IP address</li>
<li>An endpoint for the inlets client to connect to</li>
<li>A token for the inlets client to use when connecting</li>
</ul>
<p>Take a note of these.</p>
<p>Now create a DNS "A" record for the IP address of the tunnel server on your domain control panel.</p>
<p>Personally, I'm a fan of Google Domains and the .dev domains, but DigitalOcean can also manage domains through their CLI:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">IP</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nb">export</span> <span class="nv">SUBDOMAIN</span><span class="o">=</span><span class="s2">&quot;blog.example.com&quot;</span>

doctl compute domain create <span class="nv">$SUBDOMAIN</span> <span class="se">\</span>
  --ip-address <span class="nv">$IP</span>
</code></pre></div>
<p>How does the TLS encryption work?</p>
<p>The inlets server process will attempt to get a TLS certificate from Let's Encrypt using a HTTP01 Acme challenge.</p>
<p>What if I have multiple sites?</p>
<p>You can pass a number of sub-domains, for instance:</p>
<div class="highlight"><pre><span></span><code> --letsencrypt-domain blog.example.com,grafana.example.com <span class="se">\</span>
 --letsencrypt-email webmaster@example.com
</code></pre></div>
<h2 id="connect-your-tunnel-client">Connect your tunnel client<a class="headerlink" href="#connect-your-tunnel-client" title="Permanent link">&para;</a></h2>
<p>The tunnel client can be run as and when required, or you can generate a systemd unit file so that you can have it running in the background. You can run the tunnel on the same machine as the service that you're proxying, or you can run it on another computer. It's entirely up to you.</p>
<p>So you could have a Raspberry Pi which just runs Raspberry Pi OS Lite and an inlets client, and nothing else. In this way you're creating a kind of <em>router appliance</em>.</p>
<p>Let's imagine you've run a Node.js express service on your computer:</p>
<div class="highlight"><pre><span></span><code>$ git clone https://github.com/alexellis/alexellis.io <span class="se">\</span>
  --depth<span class="o">=</span><span class="m">1</span>
$ <span class="nb">cd</span> alexellis.io/
$ npm install
$ npm start

alexellis.io started on port: http://0.0.0.0:3000
</code></pre></div>
<p>inlets also has its own built-in file-server with password protection and the ability to disable browsing for sharing private links. You can expose the built-in file-server when you want to share files directly, without having to upload them first: <a href="https://inlets.dev/blog/2021/02/09/simple-filesharing.html">The simple way to share files directly from your computer</a></p>
<p>You can download the inlets client using the inletsctl tool:</p>
<div class="highlight"><pre><span></span><code>$ sudo inletsctl download
</code></pre></div>
<p>Now you can start the tunnel client and start serving a test version of my personal homepage <code>alexellis.io</code>:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">export</span> <span class="nv">URL</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
$ <span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s2">&quot;&quot;</span>

$ inlets-pro http client <span class="se">\</span>
  --url <span class="nv">$URL</span> <span class="se">\</span>
  --token <span class="nv">$TOKEN</span> <span class="se">\</span>
  --upstream blog.example.com<span class="o">=</span>http://127.0.0.1:3000
</code></pre></div>
<p>What if my services are running on different computers?</p>
<p>If they are all within the same network, then you can run the client in one place and have it point at the various internal IP addresses.</p>
<div class="highlight"><pre><span></span><code>$ inlets-pro http client <span class="se">\</span>
  --url <span class="nv">$URL</span> <span class="se">\</span>
  --token <span class="nv">$TOKEN</span> <span class="se">\</span>
  --upstream blog.example.com<span class="o">=</span>http://127.0.0.1:3000 <span class="se">\</span>
  --upstream grafana.example.com<span class="o">=</span>http://192.168.0.100:3000
</code></pre></div>
<p>If they are on different networks, you can simply run multiple clients, just change the <code>--upstream</code> flag on each client.</p>
<p>How can I run the client in the background?</p>
<p>For Linux hosts, you can generate a systemd unit file for inlets by using the <code>--generate systemd</code> flag to the client or server command.</p>
<p>Then simply copy the resulting file to the correct location on your system and install it:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">export</span> <span class="nv">URL</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
$ <span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s2">&quot;&quot;</span>

$ inlets-pro http client <span class="se">\</span>
  --url <span class="nv">$URL</span> <span class="se">\</span>
  --token <span class="nv">$TOKEN</span> <span class="se">\</span>
  --upstream blog.example.com<span class="o">=</span>http://127.0.0.1:3000 <span class="se">\</span>
  --generate<span class="o">=</span>systemd &gt; inlets.service

$ sudo cp inlets.service /etc/systemd/system/
$ sudo systemctl <span class="nb">enable</span> inlets
</code></pre></div>
<p>You can then check the logs or service status:</p>
<div class="highlight"><pre><span></span><code>$ sudo journalctl -u inlets
$ sudo systemctl status inlets
</code></pre></div>
<h2 id="access-your-website-over-the-tunnel">Access your website over the tunnel<a class="headerlink" href="#access-your-website-over-the-tunnel" title="Permanent link">&para;</a></h2>
<p>You can now access your local website being served at <a href="http://127.0.0.1:3000">http://127.0.0.1:3000</a> over the tunnel by visiting the domain you created:</p>
<p><a href="https://blog.example.com/">https://blog.example.com/</a></p>
<h3 id="your-ip-goes-where-you-go">Your IP goes where you go<a class="headerlink" href="#your-ip-goes-where-you-go" title="Permanent link">&para;</a></h3>
<p>You can close the lid on your laptop, and open it again in Starbucks or your favourite local independent coffee shop. As soon as you reconnect the client, your local server will be available over the tunnel at the same IP address and domain: <a href="https://blog.example.com/">https://blog.example.com/</a></p>
<p>I used this technique to test a live demo for the KubeCon conference. I then took a flight from London to San Diego and was able to receive traffic to my Raspberry Pi whilst tethering on a local SIM card.</p>
<p><img alt="Tethering my Raspberry Pi with K3s in San Diego" src="/images/tethering-k3s.jpeg" /></p>
<blockquote>
<p>Tethering my Raspberry Pi with K3s in San Diego</p>
</blockquote>
<h2 id="wrapping-up">Wrapping up<a class="headerlink" href="#wrapping-up" title="Permanent link">&para;</a></h2>
<p>In a very short period of time we created a private tunnel server on a public cloud of our choice, then we created a DNS record for it, and connected a client and accessed our local website.</p>
<p>You can <a href="https://inlets.dev/pricing">get started with inlets through a monthly subscription</a>, or save on a yearly plan.</p>
<p>When would you need this?</p>
<ul>
<li>If you're self-hosting websites, you already have some equipment at home, so it can work out cheaper.</li>
<li>If you're running a Kubernetes cluster or K3s on a Raspberry Pi, it can be much cheaper over the course of a year.</li>
<li>But it's also incredibly convenient for sharing files and for testing APIs or OAuth flows during development.</li>
</ul>
<p><a href="https://twitter.com/bpmct">Ben Potter at Coder</a> is writing up a tutorial on how to access a private VSCode server from anywhere using a private tunnel. If you would like to learn more, follow <a href="https://twitter.com/inletsdev">@inletsdev</a> for when it gets published.</p>
<p><img src="https://blog.alexellis.io/content/images/2021/07/PXL_20210720_080841146-s.jpg" width="60%" alt="VSCode running in the browser using Coder"></p>
<p><a href="https://twitter.com/ameier38">Andrew Meier</a> put it this way:</p>
<blockquote>
<p>"I prefer to play around with different projects without having to worry about my costs skyrocketing. I had a few Raspberry Pis and wondered if I could use them as a cluster. After a bit of searching #k3s and  inlets gave me my answer"</p>
</blockquote>
<p><img alt="Andrew's K3s cluster, with inlets" src="https://pbs.twimg.com/media/E8QOduEXIAQ2TIL?format=jpg&amp;name=small" /></p>
<blockquote>
<p>Andrew's K3s cluster, with inlets</p>
</blockquote>
<p>Read his blog post: <a href="https://andrewmeier.dev/personal-infrastructure">Personal Infrastructure with Inlets, k3s, and Pulumi</a></p>
<h3 id="you-may-also-like">You may also like<a class="headerlink" href="#you-may-also-like" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://inlets.dev/blog/2021/07/08/short-lived-clusters.html">Tunnel a service or ingress from Kubernetes</a></li>
<li><a href="https://inlets.dev/blog/2021/02/09/simple-filesharing.html">Share a file without uploading it through inlets tunnels</a></li>
<li><a href="https://inlets.dev/blog/2021/07/13/inlets-narrowboat.html">Connecting my boat to the Internet with inlets</a></li>
</ul>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 OpenFaaS Ltd

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.sections", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.5e67fbfe.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.e87a5f81.min.js"></script>
      
    
  </body>
</html>